/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.order_items;

import com.fasterxml.jackson.annotation.JsonProperty;
import java.math.BigDecimal;
import testdb.customtypes.Defaulted;
import testdb.customtypes.Defaulted.UseDefault;
import typo.runtime.DuckDbText;
import typo.runtime.DuckDbTypes;

/** This class corresponds to a row in table `order_items` which has not been persisted yet */
public record OrderItemsRowUnsaved(
    @JsonProperty("order_id") Integer orderId,
    @JsonProperty("product_id") Integer productId,
    @JsonProperty("unit_price") BigDecimal unitPrice,
    /** Default: 1 */
    Defaulted<Integer> quantity) {
  public OrderItemsRowUnsaved(
      @JsonProperty("order_id") Integer orderId,
      @JsonProperty("product_id") Integer productId,
      @JsonProperty("unit_price") BigDecimal unitPrice) {
    this(orderId, productId, unitPrice, new UseDefault<>());
  }
  ;

  public OrderItemsRowUnsaved withOrderId(Integer orderId) {
    return new OrderItemsRowUnsaved(orderId, productId, unitPrice, quantity);
  }
  ;

  public OrderItemsRowUnsaved withProductId(Integer productId) {
    return new OrderItemsRowUnsaved(orderId, productId, unitPrice, quantity);
  }
  ;

  public OrderItemsRowUnsaved withUnitPrice(BigDecimal unitPrice) {
    return new OrderItemsRowUnsaved(orderId, productId, unitPrice, quantity);
  }
  ;

  /** Default: 1 */
  public OrderItemsRowUnsaved withQuantity(Defaulted<Integer> quantity) {
    return new OrderItemsRowUnsaved(orderId, productId, unitPrice, quantity);
  }
  ;

  public static DuckDbText<OrderItemsRowUnsaved> duckDbText =
      DuckDbText.instance(
          (row, sb) -> {
            DuckDbTypes.integer.duckDbText().unsafeEncode(row.orderId, sb);
            sb.append(DuckDbText.DELIMETER);
            DuckDbTypes.integer.duckDbText().unsafeEncode(row.productId, sb);
            sb.append(DuckDbText.DELIMETER);
            DuckDbTypes.numeric.duckDbText().unsafeEncode(row.unitPrice, sb);
            sb.append(DuckDbText.DELIMETER);
            Defaulted.duckDbText(DuckDbTypes.integer.duckDbText()).unsafeEncode(row.quantity, sb);
          });

  public OrderItemsRow toRow(java.util.function.Supplier<Integer> quantityDefault) {
    return new OrderItemsRow(orderId, productId, quantity.getOrElse(quantityDefault), unitPrice);
  }
  ;
}
