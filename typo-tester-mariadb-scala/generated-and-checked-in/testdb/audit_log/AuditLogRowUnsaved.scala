/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.audit_log

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDateTime
import testdb.customtypes.Defaulted
import testdb.customtypes.Defaulted.UseDefault
import typo.data.maria.Inet6
import typo.runtime.MariaText
import typo.runtime.MariaTypes
import typo.scaladsl.MariaTypeOps

/** This class corresponds to a row in table `audit_log` which has not been persisted yet */
case class AuditLogRowUnsaved(
  /**  */
  @JsonProperty("table_name") tableName: String,
  /**  */
  @JsonProperty("record_id") recordId: String,
  /**  */
  action: String,
  /** Default: NULL

   */
  @JsonProperty("old_values") oldValues: Defaulted[Option[String]] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("new_values") newValues: Defaulted[Option[String]] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("changed_by") changedBy: Defaulted[Option[String]] = new UseDefault(),
  /** Default: current_timestamp(6)

   */
  @JsonProperty("changed_at") changedAt: Defaulted[LocalDateTime] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("client_ip") clientIp: Defaulted[Option[Inet6]] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("session_id") sessionId: Defaulted[Option[Array[Byte]]] = new UseDefault()
) {
  def toRow(
    oldValuesDefault: => Option[String],
    newValuesDefault: => Option[String],
    changedByDefault: => Option[String],
    changedAtDefault: => LocalDateTime,
    clientIpDefault: => Option[Inet6],
    sessionIdDefault: => Option[Array[Byte]],
    logIdDefault: => AuditLogId
  ): AuditLogRow = {
    new AuditLogRow(
      logId = logIdDefault,
      tableName = tableName,
      recordId = recordId,
      action = action,
      oldValues = oldValues.getOrElse(oldValuesDefault),
      newValues = newValues.getOrElse(newValuesDefault),
      changedBy = changedBy.getOrElse(changedByDefault),
      changedAt = changedAt.getOrElse(changedAtDefault),
      clientIp = clientIp.getOrElse(clientIpDefault),
      sessionId = sessionId.getOrElse(sessionIdDefault)
    )
  }
}

object AuditLogRowUnsaved {
  given mariaText: MariaText[AuditLogRowUnsaved] = MariaText.instance((row, sb) => { MariaTypes.varchar.mariaText.unsafeEncode(row.tableName, sb); sb.append(MariaText.DELIMETER); MariaTypes.varchar.mariaText.unsafeEncode(row.recordId, sb); sb.append(MariaText.DELIMETER); MariaTypes.text.mariaText.unsafeEncode(row.action, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.longtext.nullable.mariaText).unsafeEncode(row.oldValues, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.longtext.nullable.mariaText).unsafeEncode(row.newValues, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.varchar.nullable.mariaText).unsafeEncode(row.changedBy, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.datetime.mariaText).unsafeEncode(row.changedAt, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.inet6.nullable.mariaText).unsafeEncode(row.clientIp, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.varbinary.nullable.mariaText).unsafeEncode(row.sessionId, sb) })
}