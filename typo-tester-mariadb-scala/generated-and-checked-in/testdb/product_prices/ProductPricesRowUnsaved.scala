/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.product_prices

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDate
import testdb.customtypes.Defaulted
import testdb.customtypes.Defaulted.UseDefault
import testdb.price_tiers.PriceTiersId
import testdb.products.ProductsId
import typo.runtime.MariaText
import typo.runtime.MariaTypes
import typo.scaladsl.MariaTypeOps
import typo.scaladsl.ScalaDbTypes

/** This class corresponds to a row in table `product_prices` which has not been persisted yet */
case class ProductPricesRowUnsaved(
  /** 
   * Points to [[testdb.products.ProductsRow.productId]]
   */
  @JsonProperty("product_id") productId: ProductsId,
  /**  */
  price: BigDecimal,
  /**  */
  @JsonProperty("valid_from") validFrom: LocalDate,
  /** Default: NULL
   * Points to [[testdb.price_tiers.PriceTiersRow.tierId]]
   */
  @JsonProperty("tier_id") tierId: Defaulted[Option[PriceTiersId]] = new UseDefault(),
  /** Default: 'USD'

   */
  @JsonProperty("currency_code") currencyCode: Defaulted[String] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("valid_to") validTo: Defaulted[Option[LocalDate]] = new UseDefault()
) {
  def toRow(
    tierIdDefault: => Option[PriceTiersId],
    currencyCodeDefault: => String,
    validToDefault: => Option[LocalDate],
    priceIdDefault: => ProductPricesId
  ): ProductPricesRow = {
    new ProductPricesRow(
      priceId = priceIdDefault,
      productId = productId,
      tierId = tierId.getOrElse(tierIdDefault),
      price = price,
      currencyCode = currencyCode.getOrElse(currencyCodeDefault),
      validFrom = validFrom,
      validTo = validTo.getOrElse(validToDefault)
    )
  }
}

object ProductPricesRowUnsaved {
  given mariaText: MariaText[ProductPricesRowUnsaved] = MariaText.instance((row, sb) => { ProductsId.pgType.mariaText.unsafeEncode(row.productId, sb); sb.append(MariaText.DELIMETER); ScalaDbTypes.MariaTypes.numeric.mariaText.unsafeEncode(row.price, sb); sb.append(MariaText.DELIMETER); MariaTypes.date.mariaText.unsafeEncode(row.validFrom, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using PriceTiersId.pgType.nullable.mariaText).unsafeEncode(row.tierId, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.char_.mariaText).unsafeEncode(row.currencyCode, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.date.nullable.mariaText).unsafeEncode(row.validTo, sb) })
}