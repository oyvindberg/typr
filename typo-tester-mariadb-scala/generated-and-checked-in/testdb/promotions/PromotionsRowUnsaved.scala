/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.promotions

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDateTime
import testdb.customtypes.Defaulted
import testdb.customtypes.Defaulted.UseDefault
import typo.data.maria.MariaSet
import typo.runtime.MariaText
import typo.runtime.MariaTypes
import typo.scaladsl.MariaTypeOps
import typo.scaladsl.ScalaDbTypes

/** This class corresponds to a row in table `promotions` which has not been persisted yet */
case class PromotionsRowUnsaved(
  /**  */
  code: String,
  /**  */
  name: String,
  /**  */
  @JsonProperty("discount_type") discountType: String,
  /**  */
  @JsonProperty("discount_value") discountValue: BigDecimal,
  /**  */
  @JsonProperty("valid_from") validFrom: LocalDateTime,
  /**  */
  @JsonProperty("valid_to") validTo: LocalDateTime,
  /** Default: NULL

   */
  description: Defaulted[Option[String]] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("min_order_amount") minOrderAmount: Defaulted[Option[BigDecimal]] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("max_uses") maxUses: Defaulted[Option[Long]] = new UseDefault(),
  /** Default: 0

   */
  @JsonProperty("uses_count") usesCount: Defaulted[Long] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("max_uses_per_customer") maxUsesPerCustomer: Defaulted[Option[Short]] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("applicable_to") applicableTo: Defaulted[Option[MariaSet]] = new UseDefault(),
  /** Default: NULL
   * Complex eligibility rules
   */
  @JsonProperty("rules_json") rulesJson: Defaulted[Option[String]] = new UseDefault(),
  /** Default: 1

   */
  @JsonProperty("is_active") isActive: Defaulted[Boolean] = new UseDefault(),
  /** Default: current_timestamp()

   */
  @JsonProperty("created_at") createdAt: Defaulted[LocalDateTime] = new UseDefault()
) {
  def toRow(
    descriptionDefault: => Option[String],
    minOrderAmountDefault: => Option[BigDecimal],
    maxUsesDefault: => Option[Long],
    usesCountDefault: => Long,
    maxUsesPerCustomerDefault: => Option[Short],
    applicableToDefault: => Option[MariaSet],
    rulesJsonDefault: => Option[String],
    isActiveDefault: => Boolean,
    createdAtDefault: => LocalDateTime,
    promotionIdDefault: => PromotionsId
  ): PromotionsRow = {
    new PromotionsRow(
      promotionId = promotionIdDefault,
      code = code,
      name = name,
      description = description.getOrElse(descriptionDefault),
      discountType = discountType,
      discountValue = discountValue,
      minOrderAmount = minOrderAmount.getOrElse(minOrderAmountDefault),
      maxUses = maxUses.getOrElse(maxUsesDefault),
      usesCount = usesCount.getOrElse(usesCountDefault),
      maxUsesPerCustomer = maxUsesPerCustomer.getOrElse(maxUsesPerCustomerDefault),
      applicableTo = applicableTo.getOrElse(applicableToDefault),
      rulesJson = rulesJson.getOrElse(rulesJsonDefault),
      validFrom = validFrom,
      validTo = validTo,
      isActive = isActive.getOrElse(isActiveDefault),
      createdAt = createdAt.getOrElse(createdAtDefault)
    )
  }
}

object PromotionsRowUnsaved {
  given mariaText: MariaText[PromotionsRowUnsaved] = MariaText.instance((row, sb) => { MariaTypes.varchar.mariaText.unsafeEncode(row.code, sb); sb.append(MariaText.DELIMETER); MariaTypes.varchar.mariaText.unsafeEncode(row.name, sb); sb.append(MariaText.DELIMETER); MariaTypes.text.mariaText.unsafeEncode(row.discountType, sb); sb.append(MariaText.DELIMETER); ScalaDbTypes.MariaTypes.numeric.mariaText.unsafeEncode(row.discountValue, sb); sb.append(MariaText.DELIMETER); MariaTypes.datetime.mariaText.unsafeEncode(row.validFrom, sb); sb.append(MariaText.DELIMETER); MariaTypes.datetime.mariaText.unsafeEncode(row.validTo, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.text.nullable.mariaText).unsafeEncode(row.description, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using ScalaDbTypes.MariaTypes.numeric.nullable.mariaText).unsafeEncode(row.minOrderAmount, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using ScalaDbTypes.MariaTypes.intUnsigned.nullable.mariaText).unsafeEncode(row.maxUses, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using ScalaDbTypes.MariaTypes.intUnsigned.mariaText).unsafeEncode(row.usesCount, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using ScalaDbTypes.MariaTypes.tinyintUnsigned.nullable.mariaText).unsafeEncode(row.maxUsesPerCustomer, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.set.nullable.mariaText).unsafeEncode(row.applicableTo, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.longtext.nullable.mariaText).unsafeEncode(row.rulesJson, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using ScalaDbTypes.MariaTypes.bool.mariaText).unsafeEncode(row.isActive, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.datetime.mariaText).unsafeEncode(row.createdAt, sb) })
}