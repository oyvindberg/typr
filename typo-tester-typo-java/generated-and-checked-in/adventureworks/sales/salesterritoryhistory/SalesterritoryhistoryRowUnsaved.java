/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.sales.salesterritoryhistory;

import adventureworks.customtypes.Defaulted;
import adventureworks.customtypes.Defaulted.UseDefault;
import adventureworks.customtypes.TypoLocalDateTime;
import adventureworks.customtypes.TypoUUID;
import adventureworks.person.businessentity.BusinessentityId;
import adventureworks.sales.salesterritory.SalesterritoryId;
import java.util.Optional;
import typo.runtime.PgText;

/** This class corresponds to a row in table `sales.salesterritoryhistory` which has not been persisted yet */
public record SalesterritoryhistoryRowUnsaved(
  /** Primary key. The sales rep.  Foreign key to SalesPerson.BusinessEntityID.
    * Points to {@link adventureworks.sales.salesperson.SalespersonRow#businessentityid()}
    */
  BusinessentityId businessentityid,
  /** Primary key. Territory identification number. Foreign key to SalesTerritory.SalesTerritoryID.
    * Points to {@link adventureworks.sales.salesterritory.SalesterritoryRow#territoryid()}
    */
  SalesterritoryId territoryid,
  /** Primary key. Date the sales representive started work in the territory.
    * Constraint CK_SalesTerritoryHistory_EndDate affecting columns enddate, startdate:  (((enddate >= startdate) OR (enddate IS NULL)))
    */
  TypoLocalDateTime startdate,
  /** Date the sales representative left work in the territory.
    * Constraint CK_SalesTerritoryHistory_EndDate affecting columns enddate, startdate:  (((enddate >= startdate) OR (enddate IS NULL)))
    */
  Optional<TypoLocalDateTime> enddate,
  /** Default: uuid_generate_v1() */
  Defaulted<TypoUUID> rowguid,
  /** Default: now() */
  Defaulted<TypoLocalDateTime> modifieddate
) {
  public SalesterritoryhistoryRowUnsaved(
    /** Primary key. The sales rep.  Foreign key to SalesPerson.BusinessEntityID.
      * Points to {@link adventureworks.sales.salesperson.SalespersonRow#businessentityid()}
      */
    BusinessentityId businessentityid,
    /** Primary key. Territory identification number. Foreign key to SalesTerritory.SalesTerritoryID.
      * Points to {@link adventureworks.sales.salesterritory.SalesterritoryRow#territoryid()}
      */
    SalesterritoryId territoryid,
    /** Primary key. Date the sales representive started work in the territory.
      * Constraint CK_SalesTerritoryHistory_EndDate affecting columns enddate, startdate:  (((enddate >= startdate) OR (enddate IS NULL)))
      */
    TypoLocalDateTime startdate
  ) {
    this(businessentityid, territoryid, startdate, Optional.empty(), new UseDefault<>(), new UseDefault<>());
  };

  /** Primary key. The sales rep.  Foreign key to SalesPerson.BusinessEntityID.
    * Points to {@link adventureworks.sales.salesperson.SalespersonRow#businessentityid()}
    */
  public SalesterritoryhistoryRowUnsaved withBusinessentityid(BusinessentityId businessentityid) {
    return new SalesterritoryhistoryRowUnsaved(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };

  /** Primary key. Territory identification number. Foreign key to SalesTerritory.SalesTerritoryID.
    * Points to {@link adventureworks.sales.salesterritory.SalesterritoryRow#territoryid()}
    */
  public SalesterritoryhistoryRowUnsaved withTerritoryid(SalesterritoryId territoryid) {
    return new SalesterritoryhistoryRowUnsaved(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };

  /** Primary key. Date the sales representive started work in the territory.
    * Constraint CK_SalesTerritoryHistory_EndDate affecting columns enddate, startdate:  (((enddate >= startdate) OR (enddate IS NULL)))
    */
  public SalesterritoryhistoryRowUnsaved withStartdate(TypoLocalDateTime startdate) {
    return new SalesterritoryhistoryRowUnsaved(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };

  /** Date the sales representative left work in the territory.
    * Constraint CK_SalesTerritoryHistory_EndDate affecting columns enddate, startdate:  (((enddate >= startdate) OR (enddate IS NULL)))
    */
  public SalesterritoryhistoryRowUnsaved withEnddate(Optional<TypoLocalDateTime> enddate) {
    return new SalesterritoryhistoryRowUnsaved(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };

  /** Default: uuid_generate_v1() */
  public SalesterritoryhistoryRowUnsaved withRowguid(Defaulted<TypoUUID> rowguid) {
    return new SalesterritoryhistoryRowUnsaved(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };

  /** Default: now() */
  public SalesterritoryhistoryRowUnsaved withModifieddate(Defaulted<TypoLocalDateTime> modifieddate) {
    return new SalesterritoryhistoryRowUnsaved(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };

  static public PgText<SalesterritoryhistoryRowUnsaved> pgText =
    PgText.instance((row, sb) -> {
      BusinessentityId.pgType.pgText().unsafeEncode(row.businessentityid, sb);
      sb.append(PgText.DELIMETER);
      SalesterritoryId.pgType.pgText().unsafeEncode(row.territoryid, sb);
      sb.append(PgText.DELIMETER);
      TypoLocalDateTime.pgType.pgText().unsafeEncode(row.startdate, sb);
      sb.append(PgText.DELIMETER);
      TypoLocalDateTime.pgType.opt().pgText().unsafeEncode(row.enddate, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(TypoUUID.pgType.pgText()).unsafeEncode(row.rowguid, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(TypoLocalDateTime.pgType.pgText()).unsafeEncode(row.modifieddate, sb);
    });

  public SalesterritoryhistoryRow toRow(
    java.util.function.Supplier<TypoUUID> rowguidDefault,
    java.util.function.Supplier<TypoLocalDateTime> modifieddateDefault
  ) {
    return new SalesterritoryhistoryRow(businessentityid, territoryid, startdate, enddate, rowguid.getOrElse(rowguidDefault), modifieddate.getOrElse(modifieddateDefault));
  };
}