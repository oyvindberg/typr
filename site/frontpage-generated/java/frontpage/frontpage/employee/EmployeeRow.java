/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package frontpage.frontpage.employee;

import com.fasterxml.jackson.annotation.JsonProperty;
import frontpage.customtypes.Defaulted;
import frontpage.frontpage.person.PersonId;
import java.math.BigDecimal;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.PgTypes;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;
import typo.runtime.RowParsers.Tuple3;

/** Table: frontpage.employee
  * Primary key: id
  */
public record EmployeeRow(
  /** Default: gen_random_uuid() */
  EmployeeId id,
  /** Points to {@link frontpage.frontpage.person.PersonRow#id()} */
  @JsonProperty("person_id") PersonId personId,
  Optional<BigDecimal> salary
) {
  /** Default: gen_random_uuid() */
  public EmployeeRow withId(EmployeeId id) {
    return new EmployeeRow(id, personId, salary);
  };

  /** Points to {@link frontpage.frontpage.person.PersonRow#id()} */
  public EmployeeRow withPersonId(PersonId personId) {
    return new EmployeeRow(id, personId, salary);
  };

  public EmployeeRow withSalary(Optional<BigDecimal> salary) {
    return new EmployeeRow(id, personId, salary);
  };

  static RowParser<EmployeeRow> _rowParser = RowParsers.of(EmployeeId.pgType, PersonId.pgType, PgTypes.numeric.opt(), EmployeeRow::new, row -> new Tuple3<>(row.id(), row.personId(), row.salary()));;

  static public PgText<EmployeeRow> pgText =
    PgText.from(_rowParser);

  public EmployeeRowUnsaved toUnsavedRow(Defaulted<EmployeeId> id) {
    return new EmployeeRowUnsaved(personId, salary, id);
  };
}