/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package frontpage.frontpage.location;

import com.fasterxml.jackson.annotation.JsonProperty;
import frontpage.customtypes.Defaulted;
import frontpage.customtypes.Defaulted.UseDefault;
import frontpage.customtypes.TypoInet;
import frontpage.customtypes.TypoJsonb;
import frontpage.customtypes.TypoPoint;
import frontpage.customtypes.TypoPolygon;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.PgTypes;

/** This class corresponds to a row in table `frontpage.location` which has not been persisted yet */
public record LocationRowUnsaved(
  String name,
  Optional<TypoPoint> position,
  Optional<TypoPolygon> area,
  @JsonProperty("ip_range") Optional<TypoInet> ipRange,
  /** Default: gen_random_uuid() */
  Defaulted<LocationId> id,
  /** Default: '{}'::jsonb */
  Defaulted<Optional<TypoJsonb>> metadata
) {
  public LocationRowUnsaved(String name) {
    this(name, Optional.empty(), Optional.empty(), Optional.empty(), new UseDefault<>(), new UseDefault<>());
  };

  public LocationRowUnsaved withName(String name) {
    return new LocationRowUnsaved(name, position, area, ipRange, id, metadata);
  };

  public LocationRowUnsaved withPosition(Optional<TypoPoint> position) {
    return new LocationRowUnsaved(name, position, area, ipRange, id, metadata);
  };

  public LocationRowUnsaved withArea(Optional<TypoPolygon> area) {
    return new LocationRowUnsaved(name, position, area, ipRange, id, metadata);
  };

  public LocationRowUnsaved withIpRange(Optional<TypoInet> ipRange) {
    return new LocationRowUnsaved(name, position, area, ipRange, id, metadata);
  };

  /** Default: gen_random_uuid() */
  public LocationRowUnsaved withId(Defaulted<LocationId> id) {
    return new LocationRowUnsaved(name, position, area, ipRange, id, metadata);
  };

  /** Default: '{}'::jsonb */
  public LocationRowUnsaved withMetadata(Defaulted<Optional<TypoJsonb>> metadata) {
    return new LocationRowUnsaved(name, position, area, ipRange, id, metadata);
  };

  static public PgText<LocationRowUnsaved> pgText =
    PgText.instance((row, sb) -> {
      PgTypes.text.pgText().unsafeEncode(row.name, sb);
      sb.append(PgText.DELIMETER);
      TypoPoint.pgType.opt().pgText().unsafeEncode(row.position, sb);
      sb.append(PgText.DELIMETER);
      TypoPolygon.pgType.opt().pgText().unsafeEncode(row.area, sb);
      sb.append(PgText.DELIMETER);
      TypoInet.pgType.opt().pgText().unsafeEncode(row.ipRange, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(LocationId.pgType.pgText()).unsafeEncode(row.id, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(TypoJsonb.pgType.opt().pgText()).unsafeEncode(row.metadata, sb);
    });

  public LocationRow toRow(
    java.util.function.Supplier<LocationId> idDefault,
    java.util.function.Supplier<Optional<TypoJsonb>> metadataDefault
  ) {
    return new LocationRow(id.getOrElse(idDefault), name, position, area, ipRange, metadata.getOrElse(metadataDefault));
  };
}