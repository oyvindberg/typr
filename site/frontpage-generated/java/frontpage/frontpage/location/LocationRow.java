/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package frontpage.frontpage.location;

import com.fasterxml.jackson.annotation.JsonProperty;
import frontpage.customtypes.Defaulted;
import frontpage.customtypes.TypoInet;
import frontpage.customtypes.TypoJsonb;
import frontpage.customtypes.TypoPoint;
import frontpage.customtypes.TypoPolygon;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.PgTypes;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;
import typo.runtime.RowParsers.Tuple6;

/** Table: frontpage.location
  * Primary key: id
  */
public record LocationRow(
  /** Default: gen_random_uuid() */
  LocationId id,
  String name,
  Optional<TypoPoint> position,
  Optional<TypoPolygon> area,
  @JsonProperty("ip_range") Optional<TypoInet> ipRange,
  /** Default: '{}'::jsonb */
  Optional<TypoJsonb> metadata
) {
  /** Default: gen_random_uuid() */
  public LocationRow withId(LocationId id) {
    return new LocationRow(id, name, position, area, ipRange, metadata);
  };

  public LocationRow withName(String name) {
    return new LocationRow(id, name, position, area, ipRange, metadata);
  };

  public LocationRow withPosition(Optional<TypoPoint> position) {
    return new LocationRow(id, name, position, area, ipRange, metadata);
  };

  public LocationRow withArea(Optional<TypoPolygon> area) {
    return new LocationRow(id, name, position, area, ipRange, metadata);
  };

  public LocationRow withIpRange(Optional<TypoInet> ipRange) {
    return new LocationRow(id, name, position, area, ipRange, metadata);
  };

  /** Default: '{}'::jsonb */
  public LocationRow withMetadata(Optional<TypoJsonb> metadata) {
    return new LocationRow(id, name, position, area, ipRange, metadata);
  };

  static RowParser<LocationRow> _rowParser = RowParsers.of(LocationId.pgType, PgTypes.text, TypoPoint.pgType.opt(), TypoPolygon.pgType.opt(), TypoInet.pgType.opt(), TypoJsonb.pgType.opt(), LocationRow::new, row -> new Tuple6<>(row.id(), row.name(), row.position(), row.area(), row.ipRange(), row.metadata()));;

  static public PgText<LocationRow> pgText =
    PgText.from(_rowParser);

  public LocationRowUnsaved toUnsavedRow(
    Defaulted<LocationId> id,
    Defaulted<Optional<TypoJsonb>> metadata
  ) {
    return new LocationRowUnsaved(name, position, area, ipRange, id, metadata);
  };
}