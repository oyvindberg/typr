/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package frontpage.frontpage.product_category;

import com.fasterxml.jackson.annotation.JsonProperty;
import frontpage.frontpage.category.CategoryId;
import frontpage.frontpage.product.ProductId;
import typo.runtime.PgText;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;
import typo.runtime.RowParsers.Tuple2;

/** Table: frontpage.product_category
  * Composite primary key: product_id, category_id
  */
public record ProductCategoryRow(
  /** Points to {@link frontpage.frontpage.product.ProductRow#id()} */
  @JsonProperty("product_id") ProductId productId,
  /** Points to {@link frontpage.frontpage.category.CategoryRow#id()} */
  @JsonProperty("category_id") CategoryId categoryId
) {
  /** Points to {@link frontpage.frontpage.product.ProductRow#id()} */
  public ProductCategoryRow withProductId(ProductId productId) {
    return new ProductCategoryRow(productId, categoryId);
  };

  /** Points to {@link frontpage.frontpage.category.CategoryRow#id()} */
  public ProductCategoryRow withCategoryId(CategoryId categoryId) {
    return new ProductCategoryRow(productId, categoryId);
  };

  static RowParser<ProductCategoryRow> _rowParser = RowParsers.of(ProductId.pgType, CategoryId.pgType, ProductCategoryRow::new, row -> new Tuple2<>(row.productId(), row.categoryId()));;

  static public ProductCategoryRow apply(ProductCategoryId compositeId) {
    return new ProductCategoryRow(compositeId.productId(), compositeId.categoryId());
  };

  static public PgText<ProductCategoryRow> pgText =
    PgText.from(_rowParser);

  public ProductCategoryId compositeId() {
    return new ProductCategoryId(productId, categoryId);
  };

  public ProductCategoryId id() {
    return this.compositeId();
  };
}