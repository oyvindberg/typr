/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package frontpage.frontpage.product_category;

import frontpage.frontpage.category.CategoryFields;
import frontpage.frontpage.category.CategoryId;
import frontpage.frontpage.category.CategoryRow;
import frontpage.frontpage.product.ProductFields;
import frontpage.frontpage.product.ProductId;
import frontpage.frontpage.product.ProductRow;
import java.util.List;
import java.util.Optional;
import typo.dsl.ForeignKey;
import typo.dsl.Path;
import typo.dsl.SqlExpr;
import typo.dsl.SqlExpr.CompositeIn;
import typo.dsl.SqlExpr.CompositeIn.Part;
import typo.dsl.SqlExpr.FieldLike;
import typo.dsl.SqlExpr.IdField;
import typo.dsl.Structure.Relation;

public interface ProductCategoryFields {
  static final class Impl extends Relation<ProductCategoryFields, ProductCategoryRow> {
    Impl(List<Path> path) {
      super(path);
    }

    @Override
    public ProductCategoryFields fields() {
      return new ProductCategoryFields() {
               public IdField<ProductId, ProductCategoryRow> productId() {
                 return new IdField<ProductId, ProductCategoryRow>(_path, "product_id", ProductCategoryRow::productId, Optional.empty(), Optional.of("uuid"), (row, value) -> row.withProductId(value), ProductId.pgType);
               };
               public IdField<CategoryId, ProductCategoryRow> categoryId() {
                 return new IdField<CategoryId, ProductCategoryRow>(_path, "category_id", ProductCategoryRow::categoryId, Optional.empty(), Optional.of("uuid"), (row, value) -> row.withCategoryId(value), CategoryId.pgType);
               };
             };
    };

    @Override
    public List<FieldLike<?, ProductCategoryRow>> columns() {
      return List.of(this.fields().productId(), this.fields().categoryId());
    };

    public Impl copy(List<Path> path) {
      return new Impl(path);
    };
  };

  static Relation<ProductCategoryFields, ProductCategoryRow> structure() {
    return new Impl(List.of());
  };

  IdField<ProductId, ProductCategoryRow> productId();

  IdField<CategoryId, ProductCategoryRow> categoryId();

  default ForeignKey<CategoryFields, CategoryRow> fkCategory() {
    return ForeignKey.<CategoryFields, CategoryRow>of("frontpage.product_category_category_id_fkey").withColumnPair(categoryId(), CategoryFields::id);
  };

  default ForeignKey<ProductFields, ProductRow> fkProduct() {
    return ForeignKey.<ProductFields, ProductRow>of("frontpage.product_category_product_id_fkey").withColumnPair(productId(), ProductFields::id);
  };

  default SqlExpr<Boolean> compositeIdIs(ProductCategoryId compositeId) {
    return SqlExpr.all(productId().isEqual(compositeId.productId()), categoryId().isEqual(compositeId.categoryId()));
  };

  default SqlExpr<Boolean> compositeIdIn(List<ProductCategoryId> compositeIds) {
    return new CompositeIn(List.of(new Part<ProductId, ProductCategoryId, ProductCategoryRow>(productId(), ProductCategoryId::productId, ProductId.pgType), new Part<CategoryId, ProductCategoryId, ProductCategoryRow>(categoryId(), ProductCategoryId::categoryId, CategoryId.pgType)), compositeIds);
  };
}