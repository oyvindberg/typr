/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package frontpage.frontpage.customer;

import com.fasterxml.jackson.annotation.JsonProperty;
import frontpage.customtypes.Defaulted;
import frontpage.frontpage.user.UserId;
import java.math.BigDecimal;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.PgTypes;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;
import typo.runtime.RowParsers.Tuple5;

/** Table: frontpage.customer
  * Primary key: id
  */
public record CustomerRow(
  /** Default: gen_random_uuid() */
  CustomerId id,
  /** Points to {@link frontpage.frontpage.user.UserRow#id()} */
  @JsonProperty("user_id") Optional<UserId> userId,
  @JsonProperty("company_name") Optional<String> companyName,
  @JsonProperty("credit_limit") Optional<BigDecimal> creditLimit,
  /** Default: false */
  Optional<Boolean> verified
) {
  /** Default: gen_random_uuid() */
  public CustomerRow withId(CustomerId id) {
    return new CustomerRow(id, userId, companyName, creditLimit, verified);
  };

  /** Points to {@link frontpage.frontpage.user.UserRow#id()} */
  public CustomerRow withUserId(Optional<UserId> userId) {
    return new CustomerRow(id, userId, companyName, creditLimit, verified);
  };

  public CustomerRow withCompanyName(Optional<String> companyName) {
    return new CustomerRow(id, userId, companyName, creditLimit, verified);
  };

  public CustomerRow withCreditLimit(Optional<BigDecimal> creditLimit) {
    return new CustomerRow(id, userId, companyName, creditLimit, verified);
  };

  /** Default: false */
  public CustomerRow withVerified(Optional<Boolean> verified) {
    return new CustomerRow(id, userId, companyName, creditLimit, verified);
  };

  static RowParser<CustomerRow> _rowParser = RowParsers.of(CustomerId.pgType, UserId.pgType.opt(), PgTypes.text.opt(), PgTypes.numeric.opt(), PgTypes.bool.opt(), CustomerRow::new, row -> new Tuple5<>(row.id(), row.userId(), row.companyName(), row.creditLimit(), row.verified()));;

  static public PgText<CustomerRow> pgText =
    PgText.from(_rowParser);

  public CustomerRowUnsaved toUnsavedRow(
    Defaulted<CustomerId> id,
    Defaulted<Optional<Boolean>> verified
  ) {
    return new CustomerRowUnsaved(userId, companyName, creditLimit, id, verified);
  };
}