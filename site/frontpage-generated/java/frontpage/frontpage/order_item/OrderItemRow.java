/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package frontpage.frontpage.order_item;

import com.fasterxml.jackson.annotation.JsonProperty;
import frontpage.customtypes.Defaulted;
import frontpage.customtypes.TypoLocalDateTime;
import frontpage.frontpage.order.OrderId;
import frontpage.frontpage.product.ProductId;
import java.math.BigDecimal;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.PgTypes;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;
import typo.runtime.RowParsers.Tuple6;

/** Table: frontpage.order_item
  * Primary key: id
  */
public record OrderItemRow(
  /** Default: gen_random_uuid() */
  OrderItemId id,
  /** Points to {@link frontpage.frontpage.order.OrderRow#id()} */
  @JsonProperty("order_id") Optional<OrderId> orderId,
  /** Points to {@link frontpage.frontpage.product.ProductRow#id()} */
  @JsonProperty("product_id") Optional<ProductId> productId,
  Integer quantity,
  BigDecimal price,
  @JsonProperty("shipped_at") Optional<TypoLocalDateTime> shippedAt
) {
  /** Default: gen_random_uuid() */
  public OrderItemRow withId(OrderItemId id) {
    return new OrderItemRow(id, orderId, productId, quantity, price, shippedAt);
  };

  /** Points to {@link frontpage.frontpage.order.OrderRow#id()} */
  public OrderItemRow withOrderId(Optional<OrderId> orderId) {
    return new OrderItemRow(id, orderId, productId, quantity, price, shippedAt);
  };

  /** Points to {@link frontpage.frontpage.product.ProductRow#id()} */
  public OrderItemRow withProductId(Optional<ProductId> productId) {
    return new OrderItemRow(id, orderId, productId, quantity, price, shippedAt);
  };

  public OrderItemRow withQuantity(Integer quantity) {
    return new OrderItemRow(id, orderId, productId, quantity, price, shippedAt);
  };

  public OrderItemRow withPrice(BigDecimal price) {
    return new OrderItemRow(id, orderId, productId, quantity, price, shippedAt);
  };

  public OrderItemRow withShippedAt(Optional<TypoLocalDateTime> shippedAt) {
    return new OrderItemRow(id, orderId, productId, quantity, price, shippedAt);
  };

  static RowParser<OrderItemRow> _rowParser = RowParsers.of(OrderItemId.pgType, OrderId.pgType.opt(), ProductId.pgType.opt(), PgTypes.int4, PgTypes.numeric, TypoLocalDateTime.pgType.opt(), OrderItemRow::new, row -> new Tuple6<>(row.id(), row.orderId(), row.productId(), row.quantity(), row.price(), row.shippedAt()));;

  static public PgText<OrderItemRow> pgText =
    PgText.from(_rowParser);

  public OrderItemRowUnsaved toUnsavedRow(Defaulted<OrderItemId> id) {
    return new OrderItemRowUnsaved(orderId, productId, quantity, price, shippedAt, id);
  };
}