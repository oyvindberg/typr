/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package frontpage.frontpage.user;

import com.fasterxml.jackson.annotation.JsonProperty;
import frontpage.customtypes.Defaulted;
import frontpage.customtypes.Defaulted.UseDefault;
import frontpage.customtypes.TypoLocalDateTime;
import frontpage.frontpage.Email;
import frontpage.frontpage.UserRole;
import frontpage.frontpage.UserStatus;
import frontpage.frontpage.department.DepartmentId;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.PgTypes;

/** This class corresponds to a row in table `frontpage.user` which has not been persisted yet */
public record UserRowUnsaved(
  Email email,
  String name,
  /** Points to {@link frontpage.frontpage.department.DepartmentRow#id()} */
  @JsonProperty("department_id") Optional<DepartmentId> departmentId,
  /** Points to {@link frontpage.frontpage.user.UserRow#id()} */
  @JsonProperty("manager_id") Optional<UserId> managerId,
  /** Default: gen_random_uuid() */
  Defaulted<UserId> id,
  /** Default: now() */
  @JsonProperty("created_at") Defaulted<Optional<TypoLocalDateTime>> createdAt,
  /** Default: 'active'::frontpage.user_status */
  Defaulted<Optional<UserStatus>> status,
  /** Default: false */
  Defaulted<Optional<Boolean>> verified,
  /** Default: 'employee'::frontpage.user_role */
  Defaulted<Optional<UserRole>> role
) {
  public UserRowUnsaved(
    Email email,
    String name
  ) {
    this(email, name, Optional.empty(), Optional.empty(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>());
  };

  public UserRowUnsaved withEmail(Email email) {
    return new UserRowUnsaved(email, name, departmentId, managerId, id, createdAt, status, verified, role);
  };

  public UserRowUnsaved withName(String name) {
    return new UserRowUnsaved(email, name, departmentId, managerId, id, createdAt, status, verified, role);
  };

  /** Points to {@link frontpage.frontpage.department.DepartmentRow#id()} */
  public UserRowUnsaved withDepartmentId(Optional<DepartmentId> departmentId) {
    return new UserRowUnsaved(email, name, departmentId, managerId, id, createdAt, status, verified, role);
  };

  /** Points to {@link frontpage.frontpage.user.UserRow#id()} */
  public UserRowUnsaved withManagerId(Optional<UserId> managerId) {
    return new UserRowUnsaved(email, name, departmentId, managerId, id, createdAt, status, verified, role);
  };

  /** Default: gen_random_uuid() */
  public UserRowUnsaved withId(Defaulted<UserId> id) {
    return new UserRowUnsaved(email, name, departmentId, managerId, id, createdAt, status, verified, role);
  };

  /** Default: now() */
  public UserRowUnsaved withCreatedAt(Defaulted<Optional<TypoLocalDateTime>> createdAt) {
    return new UserRowUnsaved(email, name, departmentId, managerId, id, createdAt, status, verified, role);
  };

  /** Default: 'active'::frontpage.user_status */
  public UserRowUnsaved withStatus(Defaulted<Optional<UserStatus>> status) {
    return new UserRowUnsaved(email, name, departmentId, managerId, id, createdAt, status, verified, role);
  };

  /** Default: false */
  public UserRowUnsaved withVerified(Defaulted<Optional<Boolean>> verified) {
    return new UserRowUnsaved(email, name, departmentId, managerId, id, createdAt, status, verified, role);
  };

  /** Default: 'employee'::frontpage.user_role */
  public UserRowUnsaved withRole(Defaulted<Optional<UserRole>> role) {
    return new UserRowUnsaved(email, name, departmentId, managerId, id, createdAt, status, verified, role);
  };

  static public PgText<UserRowUnsaved> pgText =
    PgText.instance((row, sb) -> {
      Email.pgType.pgText().unsafeEncode(row.email, sb);
      sb.append(PgText.DELIMETER);
      PgTypes.text.pgText().unsafeEncode(row.name, sb);
      sb.append(PgText.DELIMETER);
      DepartmentId.pgType.opt().pgText().unsafeEncode(row.departmentId, sb);
      sb.append(PgText.DELIMETER);
      UserId.pgType.opt().pgText().unsafeEncode(row.managerId, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(UserId.pgType.pgText()).unsafeEncode(row.id, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(TypoLocalDateTime.pgType.opt().pgText()).unsafeEncode(row.createdAt, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(UserStatus.pgType.opt().pgText()).unsafeEncode(row.status, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(PgTypes.bool.opt().pgText()).unsafeEncode(row.verified, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(UserRole.pgType.opt().pgText()).unsafeEncode(row.role, sb);
    });

  public UserRow toRow(
    java.util.function.Supplier<UserId> idDefault,
    java.util.function.Supplier<Optional<TypoLocalDateTime>> createdAtDefault,
    java.util.function.Supplier<Optional<UserStatus>> statusDefault,
    java.util.function.Supplier<Optional<Boolean>> verifiedDefault,
    java.util.function.Supplier<Optional<UserRole>> roleDefault
  ) {
    return new UserRow(id.getOrElse(idDefault), email, name, createdAt.getOrElse(createdAtDefault), departmentId, status.getOrElse(statusDefault), verified.getOrElse(verifiedDefault), managerId, role.getOrElse(roleDefault));
  };
}