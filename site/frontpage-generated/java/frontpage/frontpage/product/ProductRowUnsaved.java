/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package frontpage.frontpage.product;

import com.fasterxml.jackson.annotation.JsonProperty;
import frontpage.customtypes.Defaulted;
import frontpage.customtypes.Defaulted.UseDefault;
import frontpage.customtypes.TypoJsonb;
import frontpage.customtypes.TypoLocalDateTime;
import java.math.BigDecimal;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.PgTypes;

/** This class corresponds to a row in table `frontpage.product` which has not been persisted yet */
public record ProductRowUnsaved(
  String name,
  BigDecimal price,
  @JsonProperty("last_restocked") Optional<TypoLocalDateTime> lastRestocked,
  /** Default: gen_random_uuid() */
  Defaulted<ProductId> id,
  /** Default: true */
  @JsonProperty("in_stock") Defaulted<Optional<Boolean>> inStock,
  /** Default: 0 */
  Defaulted<Optional<Integer>> quantity,
  /** Default: now() */
  @JsonProperty("last_modified") Defaulted<Optional<TypoLocalDateTime>> lastModified,
  /** Default: '{}'::text[] */
  Defaulted<Optional<String[]>> tags,
  /** Default: '{}'::integer[] */
  Defaulted<Optional<Integer[]>> categories,
  /** Default: '{}'::numeric[] */
  Defaulted<Optional<BigDecimal[]>> prices,
  /** Default: '{}'::jsonb[] */
  Defaulted<Optional<TypoJsonb[]>> attributes
) {
  public ProductRowUnsaved(
    String name,
    BigDecimal price
  ) {
    this(name, price, Optional.empty(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>());
  };

  public ProductRowUnsaved withName(String name) {
    return new ProductRowUnsaved(name, price, lastRestocked, id, inStock, quantity, lastModified, tags, categories, prices, attributes);
  };

  public ProductRowUnsaved withPrice(BigDecimal price) {
    return new ProductRowUnsaved(name, price, lastRestocked, id, inStock, quantity, lastModified, tags, categories, prices, attributes);
  };

  public ProductRowUnsaved withLastRestocked(Optional<TypoLocalDateTime> lastRestocked) {
    return new ProductRowUnsaved(name, price, lastRestocked, id, inStock, quantity, lastModified, tags, categories, prices, attributes);
  };

  /** Default: gen_random_uuid() */
  public ProductRowUnsaved withId(Defaulted<ProductId> id) {
    return new ProductRowUnsaved(name, price, lastRestocked, id, inStock, quantity, lastModified, tags, categories, prices, attributes);
  };

  /** Default: true */
  public ProductRowUnsaved withInStock(Defaulted<Optional<Boolean>> inStock) {
    return new ProductRowUnsaved(name, price, lastRestocked, id, inStock, quantity, lastModified, tags, categories, prices, attributes);
  };

  /** Default: 0 */
  public ProductRowUnsaved withQuantity(Defaulted<Optional<Integer>> quantity) {
    return new ProductRowUnsaved(name, price, lastRestocked, id, inStock, quantity, lastModified, tags, categories, prices, attributes);
  };

  /** Default: now() */
  public ProductRowUnsaved withLastModified(Defaulted<Optional<TypoLocalDateTime>> lastModified) {
    return new ProductRowUnsaved(name, price, lastRestocked, id, inStock, quantity, lastModified, tags, categories, prices, attributes);
  };

  /** Default: '{}'::text[] */
  public ProductRowUnsaved withTags(Defaulted<Optional<String[]>> tags) {
    return new ProductRowUnsaved(name, price, lastRestocked, id, inStock, quantity, lastModified, tags, categories, prices, attributes);
  };

  /** Default: '{}'::integer[] */
  public ProductRowUnsaved withCategories(Defaulted<Optional<Integer[]>> categories) {
    return new ProductRowUnsaved(name, price, lastRestocked, id, inStock, quantity, lastModified, tags, categories, prices, attributes);
  };

  /** Default: '{}'::numeric[] */
  public ProductRowUnsaved withPrices(Defaulted<Optional<BigDecimal[]>> prices) {
    return new ProductRowUnsaved(name, price, lastRestocked, id, inStock, quantity, lastModified, tags, categories, prices, attributes);
  };

  /** Default: '{}'::jsonb[] */
  public ProductRowUnsaved withAttributes(Defaulted<Optional<TypoJsonb[]>> attributes) {
    return new ProductRowUnsaved(name, price, lastRestocked, id, inStock, quantity, lastModified, tags, categories, prices, attributes);
  };

  static public PgText<ProductRowUnsaved> pgText =
    PgText.instance((row, sb) -> {
      PgTypes.text.pgText().unsafeEncode(row.name, sb);
      sb.append(PgText.DELIMETER);
      PgTypes.numeric.pgText().unsafeEncode(row.price, sb);
      sb.append(PgText.DELIMETER);
      TypoLocalDateTime.pgType.opt().pgText().unsafeEncode(row.lastRestocked, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(ProductId.pgType.pgText()).unsafeEncode(row.id, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(PgTypes.bool.opt().pgText()).unsafeEncode(row.inStock, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(PgTypes.int4.opt().pgText()).unsafeEncode(row.quantity, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(TypoLocalDateTime.pgType.opt().pgText()).unsafeEncode(row.lastModified, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(PgTypes.textArray.opt().pgText()).unsafeEncode(row.tags, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(PgTypes.int4Array.opt().pgText()).unsafeEncode(row.categories, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(PgTypes.numericArray.opt().pgText()).unsafeEncode(row.prices, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(TypoJsonb.pgTypeArray.opt().pgText()).unsafeEncode(row.attributes, sb);
    });

  public ProductRow toRow(
    java.util.function.Supplier<ProductId> idDefault,
    java.util.function.Supplier<Optional<Boolean>> inStockDefault,
    java.util.function.Supplier<Optional<Integer>> quantityDefault,
    java.util.function.Supplier<Optional<TypoLocalDateTime>> lastModifiedDefault,
    java.util.function.Supplier<Optional<String[]>> tagsDefault,
    java.util.function.Supplier<Optional<Integer[]>> categoriesDefault,
    java.util.function.Supplier<Optional<BigDecimal[]>> pricesDefault,
    java.util.function.Supplier<Optional<TypoJsonb[]>> attributesDefault
  ) {
    return new ProductRow(id.getOrElse(idDefault), name, price, inStock.getOrElse(inStockDefault), quantity.getOrElse(quantityDefault), lastRestocked, lastModified.getOrElse(lastModifiedDefault), tags.getOrElse(tagsDefault), categories.getOrElse(categoriesDefault), prices.getOrElse(pricesDefault), attributes.getOrElse(attributesDefault));
  };
}