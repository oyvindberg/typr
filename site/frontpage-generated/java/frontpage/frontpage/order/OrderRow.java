/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package frontpage.frontpage.order;

import com.fasterxml.jackson.annotation.JsonProperty;
import frontpage.customtypes.Defaulted;
import frontpage.customtypes.TypoLocalDateTime;
import frontpage.frontpage.OrderStatus;
import frontpage.frontpage.product.ProductId;
import frontpage.frontpage.user.UserId;
import java.math.BigDecimal;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.PgTypes;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;
import typo.runtime.RowParsers.Tuple7;

/** Table: frontpage.order
  * Primary key: id
  */
public record OrderRow(
  /** Default: gen_random_uuid() */
  OrderId id,
  /** Points to {@link frontpage.frontpage.user.UserRow#id()} */
  @JsonProperty("user_id") Optional<UserId> userId,
  /** Points to {@link frontpage.frontpage.product.ProductRow#id()} */
  @JsonProperty("product_id") Optional<ProductId> productId,
  /** Default: 'pending'::frontpage.order_status */
  Optional<OrderStatus> status,
  BigDecimal total,
  /** Default: now() */
  @JsonProperty("created_at") Optional<TypoLocalDateTime> createdAt,
  @JsonProperty("shipped_at") Optional<TypoLocalDateTime> shippedAt
) {
  /** Default: gen_random_uuid() */
  public OrderRow withId(OrderId id) {
    return new OrderRow(id, userId, productId, status, total, createdAt, shippedAt);
  };

  /** Points to {@link frontpage.frontpage.user.UserRow#id()} */
  public OrderRow withUserId(Optional<UserId> userId) {
    return new OrderRow(id, userId, productId, status, total, createdAt, shippedAt);
  };

  /** Points to {@link frontpage.frontpage.product.ProductRow#id()} */
  public OrderRow withProductId(Optional<ProductId> productId) {
    return new OrderRow(id, userId, productId, status, total, createdAt, shippedAt);
  };

  /** Default: 'pending'::frontpage.order_status */
  public OrderRow withStatus(Optional<OrderStatus> status) {
    return new OrderRow(id, userId, productId, status, total, createdAt, shippedAt);
  };

  public OrderRow withTotal(BigDecimal total) {
    return new OrderRow(id, userId, productId, status, total, createdAt, shippedAt);
  };

  /** Default: now() */
  public OrderRow withCreatedAt(Optional<TypoLocalDateTime> createdAt) {
    return new OrderRow(id, userId, productId, status, total, createdAt, shippedAt);
  };

  public OrderRow withShippedAt(Optional<TypoLocalDateTime> shippedAt) {
    return new OrderRow(id, userId, productId, status, total, createdAt, shippedAt);
  };

  static RowParser<OrderRow> _rowParser = RowParsers.of(OrderId.pgType, UserId.pgType.opt(), ProductId.pgType.opt(), OrderStatus.pgType.opt(), PgTypes.numeric, TypoLocalDateTime.pgType.opt(), TypoLocalDateTime.pgType.opt(), OrderRow::new, row -> new Tuple7<>(row.id(), row.userId(), row.productId(), row.status(), row.total(), row.createdAt(), row.shippedAt()));;

  static public PgText<OrderRow> pgText =
    PgText.from(_rowParser);

  public OrderRowUnsaved toUnsavedRow(
    Defaulted<OrderId> id,
    Defaulted<Optional<OrderStatus>> status,
    Defaulted<Optional<TypoLocalDateTime>> createdAt
  ) {
    return new OrderRowUnsaved(userId, productId, total, shippedAt, id, status, createdAt);
  };
}