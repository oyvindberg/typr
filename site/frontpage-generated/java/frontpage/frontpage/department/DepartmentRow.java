/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package frontpage.frontpage.department;

import com.fasterxml.jackson.annotation.JsonProperty;
import frontpage.customtypes.Defaulted;
import frontpage.frontpage.company.CompanyId;
import java.math.BigDecimal;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.PgTypes;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;
import typo.runtime.RowParsers.Tuple4;

/** Table: frontpage.department
  * Primary key: id
  */
public record DepartmentRow(
  /** Default: gen_random_uuid() */
  DepartmentId id,
  String name,
  Optional<BigDecimal> budget,
  /** Points to {@link frontpage.frontpage.company.CompanyRow#id()} */
  @JsonProperty("company_id") Optional<CompanyId> companyId
) {
  /** Default: gen_random_uuid() */
  public DepartmentRow withId(DepartmentId id) {
    return new DepartmentRow(id, name, budget, companyId);
  };

  public DepartmentRow withName(String name) {
    return new DepartmentRow(id, name, budget, companyId);
  };

  public DepartmentRow withBudget(Optional<BigDecimal> budget) {
    return new DepartmentRow(id, name, budget, companyId);
  };

  /** Points to {@link frontpage.frontpage.company.CompanyRow#id()} */
  public DepartmentRow withCompanyId(Optional<CompanyId> companyId) {
    return new DepartmentRow(id, name, budget, companyId);
  };

  static RowParser<DepartmentRow> _rowParser = RowParsers.of(DepartmentId.pgType, PgTypes.text, PgTypes.numeric.opt(), CompanyId.pgType.opt(), DepartmentRow::new, row -> new Tuple4<>(row.id(), row.name(), row.budget(), row.companyId()));;

  static public PgText<DepartmentRow> pgText =
    PgText.from(_rowParser);

  public DepartmentRowUnsaved toUnsavedRow(Defaulted<DepartmentId> id) {
    return new DepartmentRowUnsaved(name, budget, companyId, id);
  };
}