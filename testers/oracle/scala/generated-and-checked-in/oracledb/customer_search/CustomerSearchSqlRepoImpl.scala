/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package oracledb.customer_search

import dev.typr.foundations.Fragment
import dev.typr.foundations.OracleTypes
import java.sql.Connection
import dev.typr.foundations.Fragment.interpolate

class CustomerSearchSqlRepoImpl extends CustomerSearchSqlRepo {
  override def apply(namePattern: String)(using c: Connection): java.util.List[CustomerSearchSqlRow] = {
    interpolate(Fragment.lit("""-- Search customers by name pattern
    SELECT
        c.customer_id,
        c.name,
        c.billing_address,
        c.credit_limit,
        c.created_at
    FROM customers c
    WHERE c.name LIKE """), Fragment.encode(OracleTypes.varchar2, namePattern), Fragment.lit("""
    ORDER BY c.name
    """)).query(CustomerSearchSqlRow.`_rowParser`.all()).runUnchecked(c)
  }
}