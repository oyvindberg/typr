/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package oracledb.department_summary

import dev.typr.foundations.kotlin.Fragment
import java.sql.Connection
import kotlin.collections.List

class DepartmentSummarySqlRepoImpl() : DepartmentSummarySqlRepo {
  override fun apply(c: Connection): List<DepartmentSummarySqlRow> = Fragment.interpolate(Fragment.lit("-- Get department summary with employee count\nSELECT\n    d.dept_code,\n    d.dept_region,\n    d.dept_name,\n    d.budget,\n    COUNT(e.emp_number) as employee_count\nFROM departments d\nLEFT JOIN employees e ON d.dept_code = e.dept_code AND d.dept_region = e.dept_region\nGROUP BY d.dept_code, d.dept_region, d.dept_name, d.budget\nORDER BY d.dept_code, d.dept_region\n")).query(DepartmentSummarySqlRow._rowParser.all()).runUnchecked(c)
}