/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public.users

import adventureworks.customtypes.Defaulted
import adventureworks.customtypes.TypoInstant
import adventureworks.customtypes.TypoUnknownCitext
import java.util.Optional
import typo.runtime.PgText
import typo.runtime.PgTypes
import typo.runtime.RowParser
import typo.runtime.RowParsers
import typo.runtime.RowParsers.Tuple7

/** Table: public.users
 * Primary key: user_id
 */
case class UsersRow(
  userId: UsersId,
  name: String,
  lastName: Optional[String],
  email: TypoUnknownCitext,
  password: String,
  /** Default: now() */
  createdAt: TypoInstant,
  verifiedOn: Optional[TypoInstant]
) {
  def id: UsersId = userId

  def toUnsavedRow(createdAt: Defaulted[TypoInstant] = Defaulted.Provided(this.createdAt)): UsersRowUnsaved = {
    new UsersRowUnsaved(
      userId,
      name,
      lastName,
      email,
      password,
      verifiedOn,
      createdAt
    )
  }
}

object UsersRow {
  val `_rowParser`: RowParser[UsersRow] = {
    RowParsers.of(UsersId.pgType, PgTypes.text, PgTypes.text.opt(), TypoUnknownCitext.pgType, PgTypes.text, TypoInstant.pgType, TypoInstant.pgType.opt(), UsersRow.apply, row => new Tuple7(
      row.userId,
      row.name,
      row.lastName,
      row.email,
      row.password,
      row.createdAt,
      row.verifiedOn
    ))
  }

  given pgText: PgText[UsersRow] = PgText.from(`_rowParser`)
}