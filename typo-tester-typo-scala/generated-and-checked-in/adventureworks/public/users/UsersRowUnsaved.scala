/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public.users

import adventureworks.customtypes.Defaulted
import adventureworks.customtypes.Defaulted.UseDefault
import adventureworks.customtypes.TypoInstant
import adventureworks.customtypes.TypoUnknownCitext
import java.util.Optional
import typo.runtime.PgText
import typo.runtime.PgTypes

/** This class corresponds to a row in table `public.users` which has not been persisted yet */
case class UsersRowUnsaved(
  userId: UsersId,
  name: String,
  lastName: Optional[String] = Optional.empty(),
  email: TypoUnknownCitext,
  password: String,
  verifiedOn: Optional[TypoInstant] = Optional.empty(),
  /** Default: now() */
  createdAt: Defaulted[TypoInstant] = new UseDefault()
) {
  def toRow(createdAtDefault: => TypoInstant): UsersRow = {
    new UsersRow(
      userId = userId,
      name = name,
      lastName = lastName,
      email = email,
      password = password,
      createdAt = createdAt.getOrElse(createdAtDefault),
      verifiedOn = verifiedOn
    )
  }
}

object UsersRowUnsaved {
  given pgText: PgText[UsersRowUnsaved] = {
    PgText.instance((row, sb) => {
      UsersId.pgType.pgText.unsafeEncode(row.userId, sb);
      sb.append(PgText.DELIMETER);
      PgTypes.text.pgText.unsafeEncode(row.name, sb);
      sb.append(PgText.DELIMETER);
      PgTypes.text.opt().pgText.unsafeEncode(row.lastName, sb);
      sb.append(PgText.DELIMETER);
      TypoUnknownCitext.pgType.pgText.unsafeEncode(row.email, sb);
      sb.append(PgText.DELIMETER);
      PgTypes.text.pgText.unsafeEncode(row.password, sb);
      sb.append(PgText.DELIMETER);
      TypoInstant.pgType.opt().pgText.unsafeEncode(row.verifiedOn, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(using TypoInstant.pgType.pgText).unsafeEncode(row.createdAt, sb);
    })
  }
}