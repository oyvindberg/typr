/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.order_items

import com.fasterxml.jackson.annotation.JsonProperty
import testdb.customtypes.Defaulted
import testdb.customtypes.Defaulted.UseDefault
import typo.runtime.DuckDbText
import typo.scaladsl.ScalaDbTypes

/** This class corresponds to a row in table `order_items` which has not been persisted yet */
case class OrderItemsRowUnsaved(
  @JsonProperty("order_id") orderId: Int,
  @JsonProperty("product_id") productId: Int,
  @JsonProperty("unit_price") unitPrice: BigDecimal,
  /** Default: 1 */
  quantity: Defaulted[Int] = new UseDefault()
) {
  def toRow(quantityDefault: => Int): OrderItemsRow = {
    new OrderItemsRow(
      orderId = orderId,
      productId = productId,
      quantity = quantity.getOrElse(quantityDefault),
      unitPrice = unitPrice
    )
  }
}

object OrderItemsRowUnsaved {
  given duckDbText: DuckDbText[OrderItemsRowUnsaved] = DuckDbText.instance((row, sb) => { ScalaDbTypes.DuckDbTypes.integer.duckDbText.unsafeEncode(row.orderId, sb); sb.append(DuckDbText.DELIMETER); ScalaDbTypes.DuckDbTypes.integer.duckDbText.unsafeEncode(row.productId, sb); sb.append(DuckDbText.DELIMETER); ScalaDbTypes.DuckDbTypes.numeric.duckDbText.unsafeEncode(row.unitPrice, sb); sb.append(DuckDbText.DELIMETER); Defaulted.duckDbText(using ScalaDbTypes.DuckDbTypes.integer.duckDbText).unsafeEncode(row.quantity, sb) })
}