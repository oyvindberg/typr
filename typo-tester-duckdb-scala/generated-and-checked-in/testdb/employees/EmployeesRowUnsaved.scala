/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.employees

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDate
import testdb.customtypes.Defaulted
import testdb.customtypes.Defaulted.UseDefault
import typo.runtime.DuckDbText
import typo.runtime.DuckDbTypes
import typo.scaladsl.DuckDbTypeOps
import typo.scaladsl.ScalaDbTypes

/** This class corresponds to a row in table `employees` which has not been persisted yet */
case class EmployeesRowUnsaved(
  @JsonProperty("emp_number") empNumber: Int,
  @JsonProperty("emp_suffix") empSuffix: String,
  @JsonProperty("dept_code") deptCode: String,
  @JsonProperty("dept_region") deptRegion: String,
  @JsonProperty("emp_name") empName: String,
  salary: Option[BigDecimal] = None,
  /** Default: current_date */
  @JsonProperty("hire_date") hireDate: Defaulted[LocalDate] = new UseDefault()
) {
  def toRow(hireDateDefault: => LocalDate): EmployeesRow = {
    new EmployeesRow(
      empNumber = empNumber,
      empSuffix = empSuffix,
      deptCode = deptCode,
      deptRegion = deptRegion,
      empName = empName,
      salary = salary,
      hireDate = hireDate.getOrElse(hireDateDefault)
    )
  }
}

object EmployeesRowUnsaved {
  given duckDbText: DuckDbText[EmployeesRowUnsaved] = DuckDbText.instance((row, sb) => { ScalaDbTypes.DuckDbTypes.integer.duckDbText.unsafeEncode(row.empNumber, sb); sb.append(DuckDbText.DELIMETER); DuckDbTypes.varchar.duckDbText.unsafeEncode(row.empSuffix, sb); sb.append(DuckDbText.DELIMETER); DuckDbTypes.varchar.duckDbText.unsafeEncode(row.deptCode, sb); sb.append(DuckDbText.DELIMETER); DuckDbTypes.varchar.duckDbText.unsafeEncode(row.deptRegion, sb); sb.append(DuckDbText.DELIMETER); DuckDbTypes.varchar.duckDbText.unsafeEncode(row.empName, sb); sb.append(DuckDbText.DELIMETER); ScalaDbTypes.DuckDbTypes.numeric.nullable.duckDbText.unsafeEncode(row.salary, sb); sb.append(DuckDbText.DELIMETER); Defaulted.duckDbText(using DuckDbTypes.date.duckDbText).unsafeEncode(row.hireDate, sb) })
}